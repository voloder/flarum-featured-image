(()=>{var t={649:function(){(function(){var t=[].slice;String.prototype.autoLink=function(){var e,r,a,o,n,u;return n=/(^|[\s\n]|<[A-Za-z]*\/?>)((?:https?|ftp):\/\/[\-A-Z0-9+\u0026\u2019@#\/%?=()~_|!:,.;]*[\-A-Z0-9+\u0026@#\/%=~()_|])/gi,0<(o=1<=arguments.length?t.call(arguments,0):[]).length?(a=o[0],r=function(){var t;for(e in t=[],a)u=a[e],"callback"!==e&&t.push(" "+e+"='"+u+"'");return t}().join(""),this.replace(n,(function(t,e,o){return""+e+(("function"==typeof a.callback?a.callback(o):void 0)||"<a href='"+o+"'"+r+">"+o+"</a>")}))):this.replace(n,"$1<a href='$2'>$2</a>")}}).call(this)}},e={};function r(a){var o=e[a];if(void 0!==o)return o.exports;var n=e[a]={exports:{}};return t[a].call(n.exports,n,n.exports,r),n.exports}r.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return r.d(e,{a:e}),e},r.d=(t,e)=>{for(var a in e)r.o(e,a)&&!r.o(t,a)&&Object.defineProperty(t,a,{enumerable:!0,get:e[a]})},r.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),(()=>{"use strict";const t=flarum.core.compat["forum/app"];var e=r.n(t);const a=flarum.core.compat["common/extend"];r(649);const o=flarum.core.compat["forum/components/UserCard"];var n=r.n(o);const u=flarum.core.compat["common/models/User"];var i=r.n(u);const s=flarum.core.compat["common/Model"];var c=r.n(s);function f(t,e){return f=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},f(t,e)}const l=flarum.core.compat["common/Component"];var p=function(t){function r(){return t.apply(this,arguments)||this}var a,o;o=t,(a=r).prototype=Object.create(o.prototype),a.prototype.constructor=a,f(a,o);var n=r.prototype;return n.view=function(){var t=this.attrs.user.featuredImage()?e().translator.trans("flarum-featured-image.forum.featured_image.remove"):e().translator.trans("flarum-featured-image.forum.featured_image.add");return m("button",{className:"Button",type:"button",name:"add-featured-image",onclick:this.uploadButtonClicked.bind(this)},m("span",{className:"Button-label"},t),m("form",{style:"display: none;"},m("input",{type:"file",multiple:!1,onchange:this.uploadImage.bind(this)})))},n.uploadButtonClicked=function(t){this.attrs.user.featuredImage()?this.clearImage():this.$("input").click()},n.uploadImage=function(){var t=this.attrs.user,r=new FormData;r.append("featuredImage",this.$("input").prop("files")[0]),e().request({url:e().forum.attribute("apiUrl")+"/featured-image/upload",method:"POST",body:r}).then((function(e){t.save({featuredImage:e.data[0].attributes.url}).then((function(){m.redraw()}))}))},n.clearImage=function(){this.attrs.user.save({featuredImage:null}).then((function(){m.redraw()}))},r}(r.n(l)());e().initializers.add("flarum-featured-image",(function(){i().prototype.featuredImage=c().attribute("featuredImage"),(0,a.extend)(n().prototype,"view",(function(t){var e=this.attrs.user;e.featuredImage&&(t.attrs.style="background-image: url("+e.featuredImage()+");")})),(0,a.extend)(n().prototype,"infoItems",(function(t){var r=this.attrs.user;r.data.id===e().session.user.data.id&&t.add("add-featured-image",m(p,{user:r}," "),-100)}))}))})(),module.exports={}})();
//# sourceMappingURL=forum.js.map