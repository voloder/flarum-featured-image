(()=>{var t={649:function(){(function(){var t=[].slice;String.prototype.autoLink=function(){var e,o,r,a,n,u;return n=/(^|[\s\n]|<[A-Za-z]*\/?>)((?:https?|ftp):\/\/[\-A-Z0-9+\u0026\u2019@#\/%?=()~_|!:,.;]*[\-A-Z0-9+\u0026@#\/%=~()_|])/gi,0<(a=1<=arguments.length?t.call(arguments,0):[]).length?(r=a[0],o=function(){var t;for(e in t=[],r)u=r[e],"callback"!==e&&t.push(" "+e+"='"+u+"'");return t}().join(""),this.replace(n,(function(t,e,a){return""+e+(("function"==typeof r.callback?r.callback(a):void 0)||"<a href='"+a+"'"+o+">"+a+"</a>")}))):this.replace(n,"$1<a href='$2'>$2</a>")}}).call(this)}},e={};function o(r){var a=e[r];if(void 0!==a)return a.exports;var n=e[r]={exports:{}};return t[r].call(n.exports,n,n.exports,o),n.exports}o.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return o.d(e,{a:e}),e},o.d=(t,e)=>{for(var r in e)o.o(e,r)&&!o.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},o.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),(()=>{"use strict";const t=flarum.core.compat["forum/app"];var e=o.n(t);const r=flarum.core.compat["common/extend"];o(649);const a=flarum.core.compat["forum/components/UserCard"];var n=o.n(a);const u=flarum.core.compat["common/models/User"];var c=o.n(u);const i=flarum.core.compat["common/Model"];var l=o.n(i);function p(t,e){return p=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},p(t,e)}const s=flarum.core.compat["common/Component"];var f=function(t){function o(){return t.apply(this,arguments)||this}var r,a;a=t,(r=o).prototype=Object.create(a.prototype),r.prototype.constructor=r,p(r,a);var n=o.prototype;return n.view=function(){return m("button",{className:"Button",type:"button",name:"add-featured-image",onclick:this.uploadButtonClicked.bind(this)},m("span",{className:"Button-label"},"Select Featured Image..."),m("form",{style:"display: none;"},m("input",{type:"file",multiple:!1,onchange:this.uploadImage.bind(this)})))},n.uploadButtonClicked=function(t){this.$("input").click()},n.uploadImage=function(){var t=this.attrs.user,o=new FormData;o.append("featuredImage",this.$("input").prop("files")[0]),e().request({url:e().forum.attribute("apiUrl")+"/featured-image/upload",method:"POST",body:o}).then((function(e){console.log(t),console.log(e),console.log(m),t.save({featuredImage:e.data[0].attributes.url}).then((function(){m.redraw()}))}))},o}(o.n(s)());e().initializers.add("flarum-featured-image",(function(){c().prototype.featuredImage=l().attribute("featuredImage"),(0,r.extend)(n().prototype,"view",(function(t){var e=this.attrs.user;e.featuredImage&&(t.attrs.style="background-image: url("+e.featuredImage()+");")})),(0,r.extend)(n().prototype,"infoItems",(function(t){t.add("add-featured-image",m(f,null," "),-100)}))}))})(),module.exports={}})();
//# sourceMappingURL=forum.js.map